import os

from aiogram import Bot, Dispatcher
from aiogram.contrib.fsm_storage.memory import MemoryStorage

from sender.data.config import TOKEN_SENDER
from databases.db_sender import Database


# –ü—É—Ç—å –∫ —Ñ–æ—Ç–æ
PICTURE_PATH = os.path.join('media', 'mesye.jpg')

# –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
TEXT = """
–ñ–∏–≤–µ—Ç–µ –ª–∏ –≤—ã –∂–µ–ª–∞–µ–º–æ–π –∂–∏–∑–Ω—å—é? –î–æ—Å—Ç–∏–≥–∞–µ—Ç–µ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ü–µ–ª–µ–π?

–Ø –≤—ã—è–≤–∏–ª–∞ 3 –ø—Ä–∏—á–∏–Ω—ã, –ø–æ—á–µ–º—É –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∂–∏—Ç—å –≤ –∂–µ–ª–∞–µ–º–æ–π —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏: 

1Ô∏è‚É£ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ 
2Ô∏è‚É£ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—â–∏–µ —É–±–µ–∂–¥–µ–Ω–∏—è –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ 
3Ô∏è‚É£ —Å—Ç—Ä–∞—Ö –∑–∞—è–≤–∏—Ç—å –æ —Å–µ–±–µ, —Å—Ç—Ä–∞—Ö –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ—Å—Ç–∏ 

–Ø —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Ä–µ—à–µ–Ω–∏—è —ç—Ç–∏—Ö –ø—Ä–æ–±–ª–µ–º, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å –≤–∞–º –∏–∑–º–µ–Ω–∏—Ç—å –º—ã—à–ª–µ–Ω–∏–µ –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–≤–æ–π —Å–∞–º—ã–π —Å—á–∞—Å—Ç–ª–∏–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π üí≠

–î–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å–≤–æ–µ–≥–æ —á–∞—Ç–∞ 
¬´–¢–í–û–ô –°–ß–ê–°–¢–õ–ò–í–´–ô –°–¶–ï–ù–ê–†–ò–ô¬ª, 
–≤ –∫–æ—Ç–æ—Ä–æ–º —Å–æ—Å—Ç–æ–∏—Ç–µ –∏ –≤—ã, —è —Ä–µ—à–∏–ª–∞ –±–µ–∑–æ–ø–ª–∞—Ç–Ω–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é, –≥–¥–µ –ø–æ–¥–µ–ª—é—Å—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π –∏ –ø–æ–¥—Å–≤–µ—á—É —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é —Ä–µ—à–µ–Ω–∏—è –≤–∞—à–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ üí° 

–í–∑–∞–º–µ–Ω —è –ø–æ–ø—Ä–æ—à—É –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –º–Ω–µ –ª—É—á—à–µ —É–∑–Ω–∞—Ç—å —Å–≤–æ—é –∞—É–¥–∏—Ç–æ—Ä–∏—é üôåüèª 

–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ü–∏—Ñ—Ä—É, –∫–∞–∫—É—é —Å—Ñ–µ—Ä—É –≤—ã —Ö–æ—Ç–µ–ª–∏ –±—ã —É–ª—É—á—à–∏—Ç—å üëáüèª
"""

# –°–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –æ–∂–∏–¥–∞—Ç—å
WAIT = 1

starage = MemoryStorage()
bot = Bot(token=TOKEN_SENDER)
dp = Dispatcher(bot, storage=starage)

""" –í—ã–±–µ—Ä–∏ –±–∞–∑—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π """
# db_sender = Database('db_sender.db')
db_sender = Database('db_sender_test.db')


print(f'\n---> –ë—É–¥–µ—Ç –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∞ —Ä–∞—Å—Å—ã–ª–∫–∞ –ø–æ —Å–ø–∏—Å–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ {len(db_sender.get_users())} –∑–∞–ø–∏—Å–µ–π\n')